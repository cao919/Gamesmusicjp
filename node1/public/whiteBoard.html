<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport"content="width=device-width, initial-scale=1.0">
<link rel="stylesheet"type="text/css"href="style.css">

<title>Whiteboard</title>
</head>
<body>

	<script type="text/javascript" src="../../js/blclass.js"></script>

<button id="xdtest">xd</button>
<input  type="color" id="xd" class="C" value="#00ff00">
<input onchange ="getThing()" type="color" id="C" class="C" value="#ffff00">
<input onchange ="getThing()" type="number" id="S" class="S"value="5">
<input onclick ="clearAll()" type="button" id="B" class="B" >

<div>xdv0.34
<canvas id="canvas"></canvas>
</div>

<div id="xddiv"></div>

<script>
var canvas = document.getElementById("canvas");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;
var ctx = canvas.getContext("2d");



function getThing() {
	var getC = document.getElementById("C").value;
	var getS = document.getElementById("S").value;

	return {
		getC, getS
	};
}


function clearAll(){
	//canvas.width = canvas.width;
  ctx.fillStyle = "#00FF00";
  ctx.fillRect(0, 0, 1501, 1175);
}

function draw(e) {
	if (drawing == false) return;
	let editor = getThing();
	ctx.lineWidth = editor.getS;
	ctx.strokeStyle = editor.getC;	
	ctx.lineCap ="round";
	ctx.lineTo(e.clientX, e.clientY);
	ctx.moveTo(e.clientX, e.clientY);
	ctx.stroke();

}

function startDraw(e) {
	drawing = true;
	draw(e);
}

function overDraw() {
	drawing = false;
	ctx.beginPath();
}

canvas.addEventListener("mousedown", startDraw);
canvas.addEventListener("mouseup", overDraw);
canvas.addEventListener("mousemove", draw);

var blCanvas = function(d,w,h){
	var cvs = document.createElement("canvas");
	cvs.width = w;
	cvs.height = h;
	d.appendChild(cvs);
	cvs.style.float = "left";
}
var b = bl$("xdtest"); 
b.onclick = function(){ 
	var w = 888, h = 888;
	var d= blo0.blMD("ui", "ui",555,10,w,h,blGrey[1]);
	var tb = blo0.blDiv(d,d.id+"tb4CVS","tb4CVS",blGrey[2]);
	var vc = blo0.blDiv(d,d.id+"v4canvas","v4canvas",blGrey[0]);
	var fCVS = blo0.blCanvas2(vc,w,h); fCVS.n = 0;
	fCVS.addEventListener("mousedown", function(){
		fCVS.n = 1;
	});
	fCVS.addEventListener("mousemove", function(e){
		if(fCVS.n ){
			var x = e.offsetX;
			var y = e.offsetY;
			tb.innerHTML = "("+x+","+y+")";
		}
	});
	fCVS.addEventListener("mouseup", function(){
		fCVS.n = 0;
	});
	var ctx = fCVS.getContext("2d");								 
	ctx.fillStyle = "grey"; 
	ctx.fillRect(0,0,w,h);

	_on_off_div(b,d); 
   b.style.background = b.style.background=="red"?blGrey[5]:blColor[4];
}
</script>

</body>
</html>
